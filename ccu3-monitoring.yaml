zabbix_export:
  version: '6.2'
  date: '2023-04-16T17:14:34Z'
  template_groups:
    -
      uuid: 7df96b18c230490a9a0a9e2307226338
      name: Templates
    -
      uuid: a086b5c471b648ed844efc1d04c2a66d
      name: Templates/IOT
  templates:
    -
      uuid: 7f37a50219634aad8108c520f6a6754e
      template: template_homematic-ccu3-values
      name: 'Homematic IP CCU3'
      description: |
        Please visit the project's github page for details:
        https://github.com/ThisIsTenou/zabbix-homematic-monitoring
      groups:
        -
          name: Templates
        -
          name: Templates/IOT
      items:
        -
          uuid: ffc3c74752ca4e52a112526aa507ee81
          name: 'CCU3 Device Gatherer'
          type: EXTERNAL
          key: 'ccu3-gatherer.sh[{$CCU3_ADDRESS}]'
          delay: 1h
          history: 1h
          trends: '0'
          value_type: TEXT
        -
          uuid: d29138df436041b0adb2b8e4be8dbb96
          name: 'System Notifications'
          type: HTTP_AGENT
          key: ccu3.gatherer.systemNotifications
          delay: 15s
          trends: '0'
          value_type: TEXT
          preprocessing:
            -
              type: XML_TO_JSON
              parameters:
                - ''
          timeout: 5s
          url: 'https://{$CCU3_ADDRESS}/addons/xmlapi/systemNotification.cgi'
          triggers:
            -
              uuid: 485e536233414a088f7d256984d73a2d
              expression: length(last(/template_homematic-ccu3-values/ccu3.gatherer.systemNotifications))<>27
              name: 'System notifications present'
      discovery_rules:
        -
          uuid: 0943127d84de4e9e999c494ddb540813
          name: 'CCU3 HmIP-SMI Discovery'
          type: DEPENDENT
          key: ccu3.discovery.devices.smi
          delay: '0'
          filter:
            conditions:
              -
                macro: '{#CCU3.DEVICETYPE}'
                value: ^HmIP-SMI$
                formulaid: A
          lifetime: 7d
          item_prototypes:
            -
              uuid: ed6565c0071c421287824d9e3667d92f
              name: 'Error code of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.smi.[{#CCU3.ISEID},errorcode]'
              delay: '0'
              trends: '0'
              valuemap:
                name: ERROR_CODE
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[2]["@value"]'
              master_item:
                key: 'ccu3.gatherer.device.smi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: 70a14cff69c244b1a80f49417b4e8f4c
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.smi.[{#CCU3.ISEID},errorcode])>0'
                  name: 'Problem detected on "{#CCU3.NAME}"'
                  priority: WARNING
            -
              uuid: 78e9a2a85e1f4c60be286cec65ccfa03
              name: 'Illumination status of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.smi.[{#CCU3.ISEID},illuminationstatus]'
              delay: '0'
              trends: '0'
              valuemap:
                name: ENUM_STATUS
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[1].datapoint[3]["@value"]'
              master_item:
                key: 'ccu3.gatherer.device.smi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: 771c21e6949e40538382b4bd60930b04
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.smi.[{#CCU3.ISEID},illuminationstatus])>1'
                  name: 'Illumination status of "{#CCU3.NAME}" not ok'
                  priority: WARNING
            -
              uuid: 3dc8e0c55d18456694828b9029b7e873
              name: 'Illumination of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.smi.[{#CCU3.ISEID},illumination]'
              delay: '0'
              trends: '0'
              value_type: FLOAT
              units: lx
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[1].datapoint[2]["@value"]'
              master_item:
                key: 'ccu3.gatherer.device.smi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
            -
              uuid: 2bd0584e7afa4e8d81349b45feb770ec
              name: 'Battery status of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.smi.[{#CCU3.ISEID},lowbat]'
              delay: '0'
              trends: '0'
              valuemap:
                name: ENUM_STATUS
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[3]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'ccu3.gatherer.device.smi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
            -
              uuid: bbec7ae5460c4c19925faf7955510e8b
              name: 'Motion detection state of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.smi.[{#CCU3.ISEID},motiondetectionstate]'
              delay: '0'
              trends: '0'
              valuemap:
                name: PRESENCE_DETECTION_STATE
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[1].datapoint[4]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'ccu3.gatherer.device.smi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
            -
              uuid: 8e47506049d24a8b8d55f9873906ca44
              name: 'Operating voltage status of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.smi.[{#CCU3.ISEID},operatingvoltagestatus]'
              delay: '0'
              trends: '0'
              valuemap:
                name: ENUM_STATUS
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[5]["@value"]'
              master_item:
                key: 'ccu3.gatherer.device.smi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
            -
              uuid: 232b91a7b57b44a2b2011f441c30782d
              name: 'Operating voltage of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.smi.[{#CCU3.ISEID},operatingvoltage]'
              delay: '0'
              trends: '0'
              value_type: FLOAT
              units: V
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[4]["@value"]'
              master_item:
                key: 'ccu3.gatherer.device.smi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
            -
              uuid: a076bfa05b9c4db6b9eddc0e43573160
              name: 'Pending config for "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.smi.[{#CCU3.ISEID},pendingconfig]'
              delay: '0'
              trends: '0'
              valuemap:
                name: BOOLEAN
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[0]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'ccu3.gatherer.device.smi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
            -
              uuid: 82a442e5ab244278b648de3311f0dd8b
              name: 'Pending update for "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.smi.[{#CCU3.ISEID},pendingupdate]'
              delay: '0'
              trends: '0'
              valuemap:
                name: BOOLEAN
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[10]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'ccu3.gatherer.device.smi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
            -
              uuid: df2cada36e0c4cc88a0c96e2d2fb92c6
              name: 'Sabotage status of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.smi.[{#CCU3.ISEID},sabotage]'
              delay: '0'
              trends: '0'
              valuemap:
                name: 'Simple status'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[8]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'ccu3.gatherer.device.smi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: 8cf38c3f158c4c3fa2e26ece89799ea4
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.smi.[{#CCU3.ISEID},sabotage])=1'
                  name: 'Sabotage alarm on "{#CCU3.NAME}"'
                  priority: WARNING
            -
              uuid: 77c3d5d23ddb4f27a01bf6366f492be5
              name: 'Reachability of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.smi.[{#CCU3.ISEID},unreach]'
              delay: '0'
              trends: '0'
              valuemap:
                name: 'Simple status'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[9]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'ccu3.gatherer.device.smi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: b682ac6ec4ff4121b00d6213a1fa155e
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.smi.[{#CCU3.ISEID},unreach])>0'
                  name: 'Sensor "{#CCU3.NAME}" unreachable'
                  priority: WARNING
            -
              uuid: d56780096155401ba20eb577bb8ce819
              name: 'Motion detection status "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.spi.[{#CCU3.ISEID},motiondetectionactive]'
              delay: '0'
              trends: '0'
              valuemap:
                name: PRESENCE_DETECTION_ACTIVE
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[1].datapoint[5]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "true") {
                      return 0 ;
                      } else if (value == "false") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'ccu3.gatherer.device.smi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
            -
              uuid: ca3bd57f566a472499ae9bfaf86d0152
              name: 'Gatherer "{#CCU3.NAME}"'
              type: HTTP_AGENT
              key: 'ccu3.gatherer.device.smi.[{#CCU3.ISEID}]'
              delay: 5s
              history: 14d
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: XML_TO_JSON
                  parameters:
                    - ''
                -
                  type: JSONPATH
                  parameters:
                    - $.state.device
              timeout: 5s
              url: 'https://{$CCU3_ADDRESS}/addons/xmlapi/state.cgi?device_id={#CCU3.ISEID}'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device Gatherer {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: 793e2ede0b0149e78fe30751ec118741
                  expression: 'nodata(/template_homematic-ccu3-values/ccu3.gatherer.device.smi.[{#CCU3.ISEID}],180,"strict")=1'
                  name: 'No data received from "{#CCU3.NAME}" for over 3m'
                  priority: WARNING
          trigger_prototypes:
            -
              uuid: be3cf93c8baf4b93a78bb510211a4481
              expression: 'last(/template_homematic-ccu3-values/ccu3.device.smi.[{#CCU3.ISEID},lowbat])>0 or last(/template_homematic-ccu3-values/ccu3.device.smi.[{#CCU3.ISEID},operatingvoltagestatus])>0'
              name: 'Battery status of "{#CCU3.NAME}" not ok'
              priority: WARNING
            -
              uuid: 4212f0ff254e4796afee43a96852f2cb
              expression: 'last(/template_homematic-ccu3-values/ccu3.device.smi.[{#CCU3.ISEID},operatingvoltage])<=2.5 or last(/template_homematic-ccu3-values/ccu3.device.smi.[{#CCU3.ISEID},lowbat])>0'
              name: 'Low battery on "{#CCU3.NAME}"'
              priority: WARNING
            -
              uuid: 19352cdfa444426892a99da0a1add7a9
              expression: 'last(/template_homematic-ccu3-values/ccu3.device.smi.[{#CCU3.ISEID},motiondetectionstate])=1 and last(/template_homematic-ccu3-values/ccu3.device.spi.[{#CCU3.ISEID},motiondetectionactive])=0'
              name: 'Motion detected on "{#CCU3.NAME}"'
              status: DISABLED
              priority: INFO
          master_item:
            key: 'ccu3-gatherer.sh[{$CCU3_ADDRESS}]'
        -
          uuid: 8890be9f1a0d42aca662261705d125fa
          name: 'CCU3 HmIP-SPI Discovery'
          type: DEPENDENT
          key: ccu3.discovery.devices.spi
          delay: '0'
          filter:
            conditions:
              -
                macro: '{#CCU3.DEVICETYPE}'
                value: ^HmIP-SPI$
                formulaid: A
          lifetime: 7d
          item_prototypes:
            -
              uuid: 56b3e254ec264097925e4a28f876406e
              name: 'Error code of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.spi.[{#CCU3.ISEID},errorcode]'
              delay: '0'
              trends: '0'
              valuemap:
                name: ERROR_CODE
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[2]["@value"]'
              master_item:
                key: 'ccu3.gatherer.device.spi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: e7a14813baf44a0ea8b2773194263b55
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.spi.[{#CCU3.ISEID},errorcode])>0'
                  name: 'Problem detected on "{#CCU3.NAME}"'
                  priority: WARNING
            -
              uuid: 13f4e876fd9440eeb9852379b6e4d732
              name: 'Illumination status of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.spi.[{#CCU3.ISEID},illuminationstatus]'
              delay: '0'
              trends: '0'
              valuemap:
                name: ENUM_STATUS
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[1].datapoint[3]["@value"]'
              master_item:
                key: 'ccu3.gatherer.device.spi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: fbbd2fdcedac4e76bc37278f9f6a862b
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.spi.[{#CCU3.ISEID},illuminationstatus])>0'
                  name: 'Illumination status of "{#CCU3.NAME}" not ok'
                  priority: WARNING
            -
              uuid: 6b66827a9ccf45ddb21c367e7be1a897
              name: 'Illumination of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.spi.[{#CCU3.ISEID},illumination]'
              delay: '0'
              trends: '0'
              value_type: FLOAT
              units: lx
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[1].datapoint[2]["@value"]'
              master_item:
                key: 'ccu3.gatherer.device.spi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
            -
              uuid: a6aa438e5a9c4993b0c23cb724a891cd
              name: 'Battery status of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.spi.[{#CCU3.ISEID},lowbat]'
              delay: '0'
              trends: '0'
              valuemap:
                name: ENUM_STATUS
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[3]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'ccu3.gatherer.device.spi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
            -
              uuid: da42b097b5a7441490740b3b84d6567e
              name: 'Operating voltage status of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.spi.[{#CCU3.ISEID},operatingvoltagestatus]'
              delay: '0'
              trends: '0'
              valuemap:
                name: ENUM_STATUS
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[5]["@value"]'
              master_item:
                key: 'ccu3.gatherer.device.spi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
            -
              uuid: 86ab3486071e48278f7fd5f7ec599510
              name: 'Operating voltage of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.spi.[{#CCU3.ISEID},operatingvoltage]'
              delay: '0'
              trends: '0'
              value_type: FLOAT
              units: V
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[4]["@value"]'
              master_item:
                key: 'ccu3.gatherer.device.spi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: dd680ba5fe57422a8d47934e750b9616
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.spi.[{#CCU3.ISEID},operatingvoltage])<=2.4'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/template_homematic-ccu3-values/ccu3.device.spi.[{#CCU3.ISEID},operatingvoltage])>2.5'
                  name: 'Low battery on "{#CCU3.NAME}"'
                  priority: WARNING
            -
              uuid: 7a24bdc0c7cf4fc4a6fce35d36caff00
              name: 'Presence detection status "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.spi.[{#CCU3.ISEID},presencedetectionactive]'
              delay: '0'
              trends: '0'
              valuemap:
                name: PRESENCE_DETECTION_ACTIVE
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[1].datapoint[4]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "true") {
                      return 0 ;
                      } else if (value == "false") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'ccu3.gatherer.device.spi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
            -
              uuid: 85f133fc3a214961bdb8146b65457d59
              name: 'Presence detection state of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.spi.[{#CCU3.ISEID},presencedetectionstate]'
              delay: '0'
              trends: '0'
              valuemap:
                name: PRESENCE_DETECTION_STATE
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[1].datapoint[5]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'ccu3.gatherer.device.spi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
            -
              uuid: 8f4c706fe93c485e9bec2c46afed0406
              name: 'Sabotage status of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.spi.[{#CCU3.ISEID},sabotage]'
              delay: '0'
              trends: '0'
              valuemap:
                name: 'Simple status'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[8]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'ccu3.gatherer.device.spi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: 28d81cedbab941c5a3eae27d57e8d4bc
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.spi.[{#CCU3.ISEID},sabotage])=1'
                  name: 'Sabotage alarm on "{#CCU3.NAME}"'
                  priority: WARNING
            -
              uuid: 3c615f49fc774a28a40ca15f96e9ea9c
              name: 'Reachability of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.spi.[{#CCU3.ISEID},unreach]'
              delay: '0'
              trends: '0'
              valuemap:
                name: 'Simple status'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[9]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'ccu3.gatherer.device.spi.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: 39eb27febd524622b96c1fe45e9c6cd3
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.spi.[{#CCU3.ISEID},unreach])>0'
                  name: 'Sensor "{#CCU3.NAME}" unreachable'
                  priority: WARNING
            -
              uuid: 78b6419475164e9daf02d307ab278ded
              name: 'Gatherer "{#CCU3.NAME}"'
              type: HTTP_AGENT
              key: 'ccu3.gatherer.device.spi.[{#CCU3.ISEID}]'
              delay: 5s
              history: 14d
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: XML_TO_JSON
                  parameters:
                    - ''
                -
                  type: JSONPATH
                  parameters:
                    - $.state.device
              timeout: 5s
              url: 'https://{$CCU3_ADDRESS}/addons/xmlapi/state.cgi?device_id={#CCU3.ISEID}'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device Gatherer {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: e6c1bf5ad5dd43119e8808030702982b
                  expression: 'nodata(/template_homematic-ccu3-values/ccu3.gatherer.device.spi.[{#CCU3.ISEID}],180,"strict")=1'
                  name: 'No data received from "{#CCU3.NAME}" for over 3m'
                  priority: WARNING
          trigger_prototypes:
            -
              uuid: 6e18f4f59db147c19dd8fd6f6c6cb485
              expression: 'last(/template_homematic-ccu3-values/ccu3.device.spi.[{#CCU3.ISEID},lowbat])>0 or last(/template_homematic-ccu3-values/ccu3.device.spi.[{#CCU3.ISEID},operatingvoltagestatus])>0'
              name: 'Battery status of "{#CCU3.NAME}" not ok'
              priority: WARNING
            -
              uuid: 322c9785471e43f48366b7fcbfa7ac40
              expression: 'last(/template_homematic-ccu3-values/ccu3.device.spi.[{#CCU3.ISEID},presencedetectionstate])=1 and last(/template_homematic-ccu3-values/ccu3.device.spi.[{#CCU3.ISEID},presencedetectionactive])=0'
              name: 'Motion detected on "{#CCU3.NAME}"'
              status: DISABLED
              priority: INFO
          master_item:
            key: 'ccu3-gatherer.sh[{$CCU3_ADDRESS}]'
        -
          uuid: 1fc409011c8848c4a025fd5584943c88
          name: 'CCU3 HmIP-STH(D)/HmIP-WTH-2 Discovery'
          type: DEPENDENT
          key: ccu3.discovery.devices.sth-sthd-wth2
          delay: '0'
          filter:
            evaltype: OR
            conditions:
              -
                macro: '{#CCU3.DEVICETYPE}'
                value: ^HmIP-STHD$
                formulaid: A
              -
                macro: '{#CCU3.DEVICETYPE}'
                value: ^HmIP-STH$
                formulaid: B
              -
                macro: '{#CCU3.DEVICETYPE}'
                value: ^HmIP-WTH-2$
                formulaid: C
          lifetime: 7d
          item_prototypes:
            -
              uuid: 2c157aa272754443a5592c5025f41b08
              name: 'Current temperature reading status "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.discovery.devices.sth-sthd-wth2.[{#CCU3.ISEID},actualtempstatus]'
              delay: '0'
              history: 30d
              trends: '0'
              valuemap:
                name: ENUM_STATUS
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[1].datapoint[2]["@value"]'
              master_item:
                key: 'curlccu3.sh[{$CCU3_ADDRESS},{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: 1c7ccd1d6547417a83faaf598b030381
                  expression: 'last(/template_homematic-ccu3-values/ccu3.discovery.devices.sth-sthd-wth2.[{#CCU3.ISEID},actualtempstatus])<>0'
                  name: 'Invalid temperature reading on "{#CCU3.NAME}"'
                  priority: WARNING
            -
              uuid: bbc2460534294df685b5ed74ee5f734e
              name: 'Current temperature on "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.discovery.devices.sth-sthd-wth2.[{#CCU3.ISEID},actualtemp]'
              delay: '0'
              history: 30d
              value_type: FLOAT
              units: C
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[1].datapoint[1]["@value"]'
              master_item:
                key: 'curlccu3.sh[{$CCU3_ADDRESS},{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
            -
              uuid: 555ee839a13940df94d095e73fe173aa
              name: 'Current humidity reading status "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.discovery.devices.sth-sthd-wth2.[{#CCU3.ISEID},humiditystatus]'
              delay: '0'
              history: 30d
              trends: '0'
              valuemap:
                name: ENUM_STATUS
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[1].datapoint[12]["@value"]'
              master_item:
                key: 'curlccu3.sh[{$CCU3_ADDRESS},{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: 31fa5788ebe24e8b9ab1e4ac1a09c0c9
                  expression: 'last(/template_homematic-ccu3-values/ccu3.discovery.devices.sth-sthd-wth2.[{#CCU3.ISEID},humiditystatus])<>0'
                  name: 'Invalid humidity reading on "{#CCU3.NAME}"'
                  priority: WARNING
            -
              uuid: f231396fbf1a425588635667e35199cc
              name: 'Current humidity on "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.discovery.devices.sth-sthd-wth2.[{#CCU3.ISEID},humidity]'
              delay: '0'
              history: 30d
              units: '%rF'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[1].datapoint[11]["@value"]'
              master_item:
                key: 'curlccu3.sh[{$CCU3_ADDRESS},{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
            -
              uuid: 6114cfebba484bee91eb9a31dbfd9fcd
              name: 'Battery status of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.discovery.devices.sth-sthd-wth2.[{#CCU3.ISEID},lowbat]'
              delay: '0'
              history: 7d
              trends: '0'
              valuemap:
                name: BOOLEAN
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[2]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'curlccu3.sh[{$CCU3_ADDRESS},{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: 4a470943f75045bab6ebe838f571f3b7
                  expression: 'last(/template_homematic-ccu3-values/ccu3.discovery.devices.sth-sthd-wth2.[{#CCU3.ISEID},lowbat])=1'
                  name: 'Low battery on "{#CCU3.NAME}"'
                  priority: WARNING
            -
              uuid: 6600c243756141b2bfeed47b9bc022d7
              name: 'Pending config for "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.discovery.devices.sth-sthd-wth2.[{#CCU3.ISEID},pendingconfig]'
              delay: '0'
              history: 7d
              trends: '0'
              valuemap:
                name: BOOLEAN
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[0]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'curlccu3.sh[{$CCU3_ADDRESS},{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: 745425c7fdc142e6937def5efc888027
                  expression: 'last(/template_homematic-ccu3-values/ccu3.discovery.devices.sth-sthd-wth2.[{#CCU3.ISEID},pendingconfig])=1'
                  name: 'Pending config for "{#CCU3.NAME}"'
                  priority: INFO
            -
              uuid: d75039d2074440168fbc76d52f4aed31
              name: 'Pending update for "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.discovery.devices.sth-sthd-wth2.[{#CCU3.ISEID},pendingupdate]'
              delay: '0'
              history: 7d
              trends: '0'
              valuemap:
                name: BOOLEAN
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[8]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'curlccu3.sh[{$CCU3_ADDRESS},{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: 575d29f73f1146f7b8b2447f1c1c728b
                  expression: 'last(/template_homematic-ccu3-values/ccu3.discovery.devices.sth-sthd-wth2.[{#CCU3.ISEID},pendingupdate])=1'
                  name: 'Pending update for "{#CCU3.NAME}"'
                  priority: INFO
            -
              uuid: b45ec9f49cc24cfe85c6215e626b0796
              name: 'Reachability of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.discovery.devices.sth-sthd-wth2.[{#CCU3.ISEID},unreach]'
              delay: '0'
              history: 7d
              trends: '0'
              valuemap:
                name: BOOLEAN
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[7]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'curlccu3.sh[{$CCU3_ADDRESS},{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: 679cb40a692c43fdab0217d33fe322e8
                  expression: 'last(/template_homematic-ccu3-values/ccu3.discovery.devices.sth-sthd-wth2.[{#CCU3.ISEID},unreach])=1'
                  name: 'Device "{#CCU3.NAME}" became unreachable'
                  priority: AVERAGE
            -
              uuid: 74fa55d2128f417a94d032b9660fad04
              name: 'Gatherer "{#CCU3.NAME}"'
              type: EXTERNAL
              key: 'curlccu3.sh[{$CCU3_ADDRESS},{#CCU3.ISEID}]'
              delay: 15s
              history: 14d
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: XML_TO_JSON
                  parameters:
                    - ''
                -
                  type: JSONPATH
                  parameters:
                    - $.state.device
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device Gatherer {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: 5ca07085b70244f090361e955c390ac7
                  expression: 'nodata(/template_homematic-ccu3-values/curlccu3.sh[{$CCU3_ADDRESS},{#CCU3.ISEID}],180,"strict")=1'
                  name: 'No data received from "{#CCU3.NAME}" for over 3m'
                  priority: WARNING
          master_item:
            key: 'ccu3-gatherer.sh[{$CCU3_ADDRESS}]'
        -
          uuid: 1b45f83c635f4c27a7188a0e47a99d33
          name: 'CCU3 HmIP-SWD Discovery'
          type: DEPENDENT
          key: ccu3.discovery.devices.swd
          delay: '0'
          filter:
            conditions:
              -
                macro: '{#CCU3.DEVICETYPE}'
                value: ^HmIP-SWD$
                formulaid: A
          lifetime: 7d
          item_prototypes:
            -
              uuid: 76277c1a91e44aee85bb0978cd8ee7ea
              name: 'Alarmstate of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.swd.[{#CCU3.ISEID},alarmstate]'
              delay: '0'
              trends: '0'
              valuemap:
                name: 'Simple status'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[1].datapoint[0]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'ccu3.gatherer.device.swd.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: a7b31ce1ff334881ac0ff68f11535054
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.swd.[{#CCU3.ISEID},alarmstate])=1'
                  name: 'Alarm of "{#CCU3.NAME}" active'
                  priority: AVERAGE
                -
                  uuid: e4fb2ec5b4684b85873913ff129f222a
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.swd.[{#CCU3.ISEID},alarmstate])=2'
                  name: 'Alarmstate of "{#CCU3.NAME}" unkown'
            -
              uuid: d0fce2a819b1430198daf4a6da7cb49d
              name: 'Error code of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.swd.[{#CCU3.ISEID},errorcode]'
              delay: '0'
              trends: '0'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[2]["@value"]'
              master_item:
                key: 'ccu3.gatherer.device.swd.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: f31b667ccd5b4ce09f50a303b1fbaa57
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.swd.[{#CCU3.ISEID},errorcode])<>0'
                  name: 'Problem detected on "{#CCU3.NAME}"'
            -
              uuid: 1f251e3dbecd44909fa548c05813af23
              name: 'Positioning status of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.swd.[{#CCU3.ISEID},errornonflatpositioning]'
              delay: '0'
              trends: '0'
              valuemap:
                name: 'Simple status'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[3]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'ccu3.gatherer.device.swd.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: a87a306628524b94a66cf1c68b5c890b
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.swd.[{#CCU3.ISEID},errornonflatpositioning])=1'
                  recovery_mode: NONE
                  name: '"{#CCU3.NAME}" has been moved'
                  priority: WARNING
                  manual_close: 'YES'
                -
                  uuid: 2ebddf135a2149d4b014fde049af5758
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.swd.[{#CCU3.ISEID},errornonflatpositioning])=2'
                  name: 'Positioning status of "{#CCU3.NAME}" is unknown'
            -
              uuid: b3dac049cb704e7286ab80263303cb17
              name: 'Battery status of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.swd.[{#CCU3.ISEID},lowbat]'
              delay: '0'
              trends: '0'
              valuemap:
                name: 'Simple status'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[4]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'ccu3.gatherer.device.swd.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
            -
              uuid: e48119567e3a480a942154ecbad5db22
              name: 'Moisture status of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.swd.[{#CCU3.ISEID},moisturedetected]'
              delay: '0'
              trends: '0'
              valuemap:
                name: 'Simple status'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[1].datapoint[1]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'ccu3.gatherer.device.swd.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: c4b11f08717147dd8414396ed24eefaa
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.swd.[{#CCU3.ISEID},moisturedetected])=1'
                  name: 'Moisture detected on "{#CCU3.NAME}"'
                  priority: HIGH
            -
              uuid: 78f1d8b30f0a432b9ebef4bfb7c8c7f7
              name: 'Operating voltage status of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.swd.[{#CCU3.ISEID},operatingvoltagestatus]'
              delay: '0'
              trends: '0'
              valuemap:
                name: 'Simple status'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[6]["@value"]'
              master_item:
                key: 'ccu3.gatherer.device.swd.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
            -
              uuid: 48f563bab2054afb80c088a9a205d7e4
              name: 'Operating voltage of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.swd.[{#CCU3.ISEID},operatingvoltage]'
              delay: '0'
              value_type: FLOAT
              units: V
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[5]["@value"]'
              master_item:
                key: 'ccu3.gatherer.device.swd.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: 38743a301cf04996b9cd0be922054c56
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.swd.[{#CCU3.ISEID},operatingvoltage])<=2.2'
                  name: 'Low battery on "{#CCU3.NAME}"'
                  priority: WARNING
            -
              uuid: a5bd28ee11aa4b83ac5c37a7e8735faa
              name: 'Reachability of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.swd.[{#CCU3.ISEID},unreach]'
              delay: '0'
              history: 14d
              valuemap:
                name: 'Simple status'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[9]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'ccu3.gatherer.device.swd.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: 14ca8b52f5d6452e87424a640283d99a
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.swd.[{#CCU3.ISEID},unreach])=2'
                  name: 'Reachability of "{#CCU3.NAME}" unkown'
                -
                  uuid: 3e5c83952d714305877aed20dd5843f4
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.swd.[{#CCU3.ISEID},unreach])=1'
                  name: 'Sensor "{#CCU3.NAME}" unreachable'
                  priority: AVERAGE
            -
              uuid: 86a8e69cfce44faf9b0870cbb3ae3793
              name: 'Waterlevel status of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.swd.[{#CCU3.ISEID},waterleveldetected]'
              delay: '0'
              trends: '0'
              valuemap:
                name: 'Simple status'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[1].datapoint[2]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'ccu3.gatherer.device.swd.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: bcb4315f3c54499d9383373e3f2edcf0
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.swd.[{#CCU3.ISEID},waterleveldetected])=1'
                  name: 'Water detected on "{#CCU3.NAME}"'
                  priority: DISASTER
            -
              uuid: 3425991bb2d1404bb7330a7eb7ffb1ed
              name: 'Gatherer "{#CCU3.NAME}"'
              type: HTTP_AGENT
              key: 'ccu3.gatherer.device.swd.[{#CCU3.ISEID}]'
              delay: 15s
              history: 14d
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: XML_TO_JSON
                  parameters:
                    - ''
                -
                  type: JSONPATH
                  parameters:
                    - $.state.device
              timeout: 5s
              url: 'https://{$CCU3_ADDRESS}/addons/xmlapi/state.cgi?device_id={#CCU3.ISEID}'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device Gatherer {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: ca04f14365234cbfb9a8df2bb3cbf79c
                  expression: 'nodata(/template_homematic-ccu3-values/ccu3.gatherer.device.swd.[{#CCU3.ISEID}],180,"strict")=1'
                  name: 'No data received from "{#CCU3.NAME}" for over 3m'
                  priority: WARNING
          trigger_prototypes:
            -
              uuid: 75177ca2bb96420d8f0153d46877328d
              expression: 'last(/template_homematic-ccu3-values/ccu3.device.swd.[{#CCU3.ISEID},lowbat])=1 or last(/template_homematic-ccu3-values/ccu3.device.swd.[{#CCU3.ISEID},operatingvoltagestatus])=1'
              name: 'Battery status of "{#CCU3.NAME}" not ok'
              priority: WARNING
            -
              uuid: bed6e4f912174969a06960fe811bee04
              expression: 'last(/template_homematic-ccu3-values/ccu3.device.swd.[{#CCU3.ISEID},lowbat])=2 or last(/template_homematic-ccu3-values/ccu3.device.swd.[{#CCU3.ISEID},operatingvoltagestatus])=2'
              name: 'Battery status of "{#CCU3.NAME}" unkown'
            -
              uuid: 6a3f48d5e6c7486c98ad25fc104f7c5a
              expression: 'last(/template_homematic-ccu3-values/ccu3.device.swd.[{#CCU3.ISEID},moisturedetected])=2 or last(/template_homematic-ccu3-values/ccu3.device.swd.[{#CCU3.ISEID},waterleveldetected])=2'
              name: 'Water/Moisture detection status of "{#CCU3.NAME}" unknown'
          master_item:
            key: 'ccu3-gatherer.sh[{$CCU3_ADDRESS}]'
        -
          uuid: d2753416641447298689176e0af80471
          name: 'CCU3 HmIP-SWSD Discovery'
          type: DEPENDENT
          key: ccu3.discovery.devices.swsd
          delay: '0'
          filter:
            conditions:
              -
                macro: '{#CCU3.DEVICETYPE}'
                value: ^HmIP-SWSD$
                formulaid: A
          lifetime: 7d
          item_prototypes:
            -
              uuid: efb775a296064049a113b812c5fcfee5
              name: 'Chamber status of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.swsd.[{#CCU3.ISEID},degradedchamber]'
              delay: '0'
              trends: '0'
              valuemap:
                name: 'Simple status'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[1].datapoint[1]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'ccu3.gatherer.device.swsd.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: e711aaf202d249fd866d3ea46515dc49
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.swsd.[{#CCU3.ISEID},degradedchamber])>0'
                  name: 'Chamber status of "{#CCU3.NAME}" not ok'
                  priority: WARNING
            -
              uuid: ac9ec56a9389482b84c0f3e7e07397ac
              name: 'Error code of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.swsd.[{#CCU3.ISEID},errorcode]'
              delay: '0'
              trends: '0'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[1].datapoint[0]["@value"]'
              master_item:
                key: 'ccu3.gatherer.device.swsd.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: a725b230b5454825adf404daed760dde
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.swsd.[{#CCU3.ISEID},errorcode])>0'
                  name: 'Problem detected on "{#CCU3.NAME}"'
                  priority: WARNING
            -
              uuid: 5047ed5f405c4447bfda7b5b93cafda9
              name: 'Battery status of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.swsd.[{#CCU3.ISEID},lowbat]'
              delay: '0'
              history: 14d
              trends: '0'
              valuemap:
                name: 'Simple status'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[2]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'ccu3.gatherer.device.swsd.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: 3eb4240511ac4098ae03024152cb2a66
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.swsd.[{#CCU3.ISEID},lowbat])=1'
                  name: 'Battery status of "{#CCU3.NAME}" not ok'
                  priority: WARNING
            -
              uuid: ca072fc311f34152a8bc4ab0d6b90c3d
              name: 'Smoke detector alarm status of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.swsd.[{#CCU3.ISEID},smokedetectoralarmstatus]'
              delay: '0'
              trends: '0'
              valuemap:
                name: SMOKE_DETECTOR_ALARM_STATUS
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[1].datapoint[2]["@value"]'
              master_item:
                key: 'ccu3.gatherer.device.swsd.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: 146bf6ae570c4360b800bdb957354e88
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.swsd.[{#CCU3.ISEID},smokedetectoralarmstatus])=2'
                  name: 'Intrusion alarm of "{#CCU3.NAME}" active'
                  priority: AVERAGE
                -
                  uuid: 90d5bf928717480f9f9826f55d00ca20
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.swsd.[{#CCU3.ISEID},smokedetectoralarmstatus])=1'
                  name: 'Local alarm of "{#CCU3.NAME}" active'
                  priority: DISASTER
                -
                  uuid: 44a431b7a9ef4d449d0d6accfb92d53a
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.swsd.[{#CCU3.ISEID},smokedetectoralarmstatus])=3'
                  name: 'Remote alarm of "{#CCU3.NAME}" active'
                  priority: AVERAGE
            -
              uuid: d04c9af250be44f38145a6e7eff9d643
              name: 'Smoke detector test result of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.swsd.[{#CCU3.ISEID},smokedetectortestresult]'
              delay: '0'
              trends: '0'
              valuemap:
                name: SMOKE_DETECTOR_TEST_RESULT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[1].datapoint[4]["@value"]'
              master_item:
                key: 'ccu3.gatherer.device.swsd.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: d56bb7fbd8924050b722782511fa6ae8
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.swsd.[{#CCU3.ISEID},smokedetectortestresult])=3'
                  name: 'Communication test of "{#CCU3.NAME}" in progress'
                  priority: INFO
                -
                  uuid: f88354c4e4e745539a70547ffdcfc6a6
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.swsd.[{#CCU3.ISEID},smokedetectortestresult])=2'
                  name: 'Test result of "{#CCU3.NAME}" not ok'
                  priority: WARNING
            -
              uuid: a8b72ec5f14d405a91598cfcdf300da3
              name: 'Reachability of "{#CCU3.NAME}"'
              type: DEPENDENT
              key: 'ccu3.device.swsd.[{#CCU3.ISEID},unreach]'
              delay: '0'
              history: 14d
              valuemap:
                name: 'Simple status'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.channel[0].datapoint[7]["@value"]'
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value == "false") {
                      return 0 ;
                      } else if (value == "true") {
                      return 1 ;
                      } else {
                      return 2 ;
                      }
              master_item:
                key: 'ccu3.gatherer.device.swsd.[{#CCU3.ISEID}]'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: 366ec722325546e2abbab4c0576efca4
                  expression: 'last(/template_homematic-ccu3-values/ccu3.device.swsd.[{#CCU3.ISEID},unreach])=1'
                  name: 'Sensor "{#CCU3.NAME}" unreachable'
                  priority: WARNING
            -
              uuid: 7c69d163358e4de5b5112e2cd575c56e
              name: 'Gatherer "{#CCU3.NAME}"'
              type: HTTP_AGENT
              key: 'ccu3.gatherer.device.swsd.[{#CCU3.ISEID}]'
              delay: 15s
              history: 14d
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: XML_TO_JSON
                  parameters:
                    - ''
                -
                  type: JSONPATH
                  parameters:
                    - $.state.device
              timeout: 5s
              url: 'https://{$CCU3_ADDRESS}/addons/xmlapi/state.cgi?device_id={#CCU3.ISEID}'
              tags:
                -
                  tag: Application
                  value: 'CCU3 Device Gatherer {#CCU3.NAME} ({#CCU3.ISEID})'
              trigger_prototypes:
                -
                  uuid: 59a5d74547eb4c66b628c64386c6b523
                  expression: 'nodata(/template_homematic-ccu3-values/ccu3.gatherer.device.swsd.[{#CCU3.ISEID}],180,"strict")=1'
                  name: 'No data received from "{#CCU3.NAME}" for over 3m'
                  priority: WARNING
          master_item:
            key: 'ccu3-gatherer.sh[{$CCU3_ADDRESS}]'
      macros:
        -
          macro: '{$CCU3_ADDRESS}'
          description: 'IP or DNS name of CCU3'
      valuemaps:
        -
          uuid: 3c9c57d7d9e847bfa21555b25f78a119
          name: BOOLEAN
          mappings:
            -
              value: '0'
              newvalue: 'false'
            -
              value: '1'
              newvalue: 'true'
        -
          uuid: 55d674fbb3054bcba89f00f03237ffd9
          name: ENUM_STATUS
          mappings:
            -
              value: '0'
              newvalue: Normal
            -
              value: '1'
              newvalue: Unknown
            -
              value: '2'
              newvalue: Overflow
            -
              value: '3'
              newvalue: Underflow
        -
          uuid: 746ffbdd106f49689a43524a84de0e9b
          name: ERROR_CODE
          mappings:
            -
              value: '0'
              newvalue: ok
            -
              type: IN_RANGE
              value: 1-255
              newvalue: error
        -
          uuid: 1a5ed072a92f476589ac5248dfc4ee8b
          name: PRESENCE_DETECTION_ACTIVE
          mappings:
            -
              value: '0'
              newvalue: Enabled
            -
              value: '1'
              newvalue: Disabled
            -
              value: '2'
              newvalue: Unknown
        -
          uuid: 737b0675193d4a73987bb77474b67332
          name: PRESENCE_DETECTION_STATE
          mappings:
            -
              value: '0'
              newvalue: 'No movement'
            -
              value: '1'
              newvalue: Movement
            -
              value: '2'
              newvalue: Unknown
        -
          uuid: a267fefcca5c433cbc6cb1e588da18b2
          name: 'Simple status'
          mappings:
            -
              value: '0'
              newvalue: Ok
            -
              value: '1'
              newvalue: Problem
            -
              value: '2'
              newvalue: Unknown
        -
          uuid: 3113e5aafb81415d9d355d6bdd58d084
          name: SMOKE_DETECTOR_ALARM_STATUS
          mappings:
            -
              value: '0'
              newvalue: Idle
            -
              value: '1'
              newvalue: 'Primary Alarm'
            -
              value: '2'
              newvalue: 'Intrusion Detection'
            -
              value: '3'
              newvalue: 'Secondary Alarm'
        -
          uuid: 0e2cc8bacef0488d810901d40dad5049
          name: SMOKE_DETECTOR_TEST_RESULT
          mappings:
            -
              value: '0'
              newvalue: None
            -
              value: '1'
              newvalue: 'Smoke Test OK'
            -
              value: '2'
              newvalue: 'Smoke Test Failed'
            -
              value: '3'
              newvalue: 'Communication Test Sent'
            -
              value: '4'
              newvalue: 'Communication Test OK'
